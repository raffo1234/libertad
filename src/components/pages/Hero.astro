---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import image1 from "../../assets/image1.jpg";
import hero3 from "../../assets/hero3.png";
import image3 from "../../assets/image3.jpg";

const images = [
  {
    alt: "Libertad | Sala luminosa con grandes ventanales, muebles claros y decoración minimalista",
    imageSrc: image3,
  },
  {
    alt: "Libertad | Espacio de estudio luminoso con ventanales grandes y decoración minimalista",
    imageSrc: image1,
  },
  {
    alt: "Libertad | Habitación bien iluminada con cama grande ",
    imageSrc: hero3,
  },
];
---

<section class="mb-[40px]">
  <p class="text-center text-xl sm:text-2xl">Vive una experiencia única</p>
  <h2
    id="title"
    class="leading-[1em] text-center font-manrope text-nowrap translate-y-4 transition-transform duration-700 ease-in-out"
    style={{
      fontSize: "clamp(24px, 10vw + 1rem, 190px)",
    }}
  >
    Hogar soñado
  </h2>
  <div class="rounded-full relative -mt-[3%]">
    <div
      class="relative overflow-hidden h-[540px] backdrop-blur-sm w-full rounded-[50px] bg-opacity-30 bg-white"
    >
      {
        images.map(({ imageSrc, alt }) => {
          return (
            <Image
              src={imageSrc}
              alt={alt}
              title={alt}
              class="absolute opacity-0 transition-opacity ease-in-out duration-1000 left-0 top-0 object-cover w-full h-full object-top slide-js"
              style={{
                maskImage:
                  "linear-gradient(to bottom, rgba(255,0,0,0.5), rgba(255,0,0,1) 10%, rgba(255,0,0,1) 90%) ",
              }}
            />
          );
        })
      }
    </div>
    <section
      class="absolute -bottom-9 drop-shadow-xl left-0 sm:left-1/2 sm:-translate-x-1/2 w-full sm:w-[70%] py-5 sm:px-6 rounded-[26px] lg:justify-between lg:flex items-center bg-[#e0ddd5]"
    >
      <h2 class="hidden">características</h2>
      <div
        class="flex items-center w-full lg:w-1/2 justify-around mb-4 lg:mb-0"
      >
        <article class="flex items-center space-x-3">
          <Icon
            name="material-symbols-light:king-bed-outline"
            size="40"
            class="text-[#ff9100]"
          />
          <div>
            <h3>3 Dorms</h3>
            <p><b>2 Baños</b></p>
          </div>
        </article>
        <article class="flex items-center space-x-3">
          <Icon
            name="material-symbols-light:activity-zone-outline"
            size="40"
            class="text-[#ff9100]"
          />
          <div>
            <h3>Área</h3>
            <p><b>Desde 85 m<sup>2</sup></b></p>
          </div>
        </article>
      </div>
      <div class="flex items-center w-full lg:w-1/2 justify-around">
        <article class="flex items-center space-x-3">
          <Icon
            name="material-symbols-light:graph-5"
            size="40"
            class="text-[#ff9100]"
          />
          <div>
            <h3>Etapa</h3>
            <p><b>Lanzamiento</b></p>
          </div>
        </article>
        <a
          href="#planos"
          class="bg-[#ff9100] text-white rounded-xl flex items-center space-x-1 px-4 py-2"
          title="Ver planos"
        >
          <Icon
            name="material-symbols-light:auto-awesome-mosaic-outline"
            size="40"
          />
          <span> Planos </span>
        </a>
      </div>
    </section>
  </div>
</section>

<script is:inline>
  const title = document.getElementById("title"); // The entire page is fully loaded
  setTimeout(function () {
    title.classList.remove("translate-y-4");
    title.classList.add("translate-y-0");
  }, 650);
</script>

<script is:inline>
  const slides = document.querySelectorAll(".slide-js");
  let currentSlide = 0;

  slides[0].classList.add("opacity-100");

  function showNextSlide() {
    for (const el of slides) {
      el.classList.remove("opacity-100");
    }
    slides[currentSlide].classList.add("opacity-100");
    currentSlide = (currentSlide + 1) % slides.length;
  }

  setInterval(showNextSlide, 3000);
</script>
